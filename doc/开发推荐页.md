# 推荐页

## 轮播图

1.  在获取数据渲染到`slider`组件的时候，会获取不到渲染的 dom 结构的 length

**原因**：这是因为 setState 并不是立即更新的

解决办法很简单

```
// 使用一个三目运算去判断渲染结果就可以了

!this.state.sliders.length ? '' : div
```

2.  react 对空数组循环无用

3.  因为图片的加载也是需要事件的，所以在图片加载完成的时候添加了事件，这个事件是完成后刷新 bs

这个操作有两种解决方案，第一种获得子组件的 dom，`ref={slider => this.silder = slider}`

第二种通过 props，传递给子组件一个函数，通过这个函数传递参数来操作，但是这种方法很不方便，因为主要事件还是`onLoad`, 而且对传过去函数的声明周期也不好判断

因此最终选择第一种

4. 在使用`lazyload`的时候，使用节流或者防抖去掉多次请求的问题

防抖：一段时间内连续的调用函数只执行一次
节流：每隔一段时间执行一次
